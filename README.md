# Анализ покупок/пользователей в e-commerce

## Задачи

1. Необходимо проанализировать совершенные покупки и ответить на следующие вопросы:
   - Сколько у нас пользователей, которые совершили покупку только один раз?
   - Сколько заказов в месяц в среднем не доставляется по разным причинам (вывести детализацию по причинам)?
   - В какой день недели каждый товар чаще всего покупается?
   - Сколько у каждого из пользователей в среднем покупок в неделю (по месяцам)? Не стоит забывать, что внутри месяца может быть не целое количество недель. Например, в ноябре 2021 года 4,28 недели. И внутри метрики это нужно учесть.
2. Выполнить когортный анализ пользователей и в период с января по декабрь выявить когорту с самым высоким Retention на 3-й месяц.
3. Построить RFM-сегментацию пользователей. В кластеризации можно выбрать следующие метрики: R - время от последней покупки пользователя до текущей даты, F - суммарное количество покупок у пользователя за всё время, M - сумма покупок за всё время.

## Описание данных

**`olist_customers_dataset.csv` — таблица с уникальными идентификаторами пользователей**
- `customer_id` — позаказный идентификатор пользователя
- `customer_unique_id` — уникальный идентификатор пользователя (аналог номера паспорта)
- `customer_zip_code_prefix` — почтовый индекс пользователя
- `customer_city` — город доставки пользователя
- `customer_state` — штат доставки пользователя

**`olist_orders_dataset.csv` — таблица заказов**
- `order_id` — уникальный идентификатор заказа (номер чека)
- `customer_id` — позаказный идентификатор пользователя
- `order_status` — статус заказа (created — создан, approved — подтверждён, invoiced — выставлен счёт, processing — в процессе сборки заказа, shipped — отгружен со склада, delivered — доставлен пользователю, unavailable — недоступен, canceled — отменён)
- `order_purchase_timestamp` — время создания заказа
- `order_approved_at` — время подтверждения оплаты заказа
- `order_delivered_carrier_date` — время передачи заказа в логистическую службу
- `order_delivered_customer_date` — время доставки заказа
- `order_estimated_delivery_date` — обещанная дата доставки

**`olist_order_items_dataset.csv` — товарные позиции, входящие в заказы**
- `order_id` — уникальный идентификатор заказа (номер чека)
- `order_item_id` — идентификатор товара внутри одного заказа
- `product_id` — id товара (аналог штрихкода)
- `seller_id` — id производителя товара
- `shipping_limit_date` — максимальная дата доставки продавцом для передачи заказа партнеру по логистике
- `price` — цена за единицу товара
- `freight_value` — вес товара

## Стек

Python (pandas, numpy, seaborn, matplotlib, squarify, requests, urllib.parse)

## Результаты

- Провела EDA, в результате которого сформулировала и обосновала свой выбор того, что должно считаться покупкой
- Рассчитала кол-во пользователей, которые совершили покупку только один раз
- Выяснила число не доставляемых по разным причинам заказов в среднем в месяц
- Определила по каждому товару, в какой день недели он чаще всего покупается
- Узнала среднее кол-во покупок по пользователям в неделю (по месяцам)
- Провела когортный анализ пользователей с расчетом Retention Rate
- Построила RFM-сегментацию с визуализацией соотношения сегментов клиентов
- На основе проведенного анализа клиентской базы разработала рекомендации, направленные на оптимизацию стратегий привлечения и удержания клиентов

## Вывод

1. Выявила, что значительную долю среди клиентов занимают спящие, а чемпионы и лояльные - меньше 2%. Также достаточно много новичков (почти одна третья клиентов) и китов (около 22%).
2. Разработала рекомендации для групп:
   - **champions** - персонализированная программа лояльности с вознаграждениями, эксклюзивные предложения
   - **loyal** - отзывы за бонусы, многоуровневые скидки, ранний доступ к распродажам, сопутствующие товары, подарки, программа лояльности, реферальная система
   - **whales** - персонализированные email и пуши, предложение товаров из схожей категории, изучение предпочтений, предложение дорогих товаров
   - **new** - помощь в выборе товара, полезный контент, поздравления, акции
   - **sleeping** - выяснение причин неактивности, релевантные товары, скидки и акции
